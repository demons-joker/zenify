# Zenify æŠ€æœ¯æ–‡æ¡£

> æ™ºèƒ½å¥åº·é¥®é£Ÿç®¡ç†åº”ç”¨æŠ€æœ¯æ–‡æ¡£  
> ç‰ˆæœ¬: 1.0.0  
> æ›´æ–°æ—¥æœŸ: 2025-01-15

---

## ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [æ•°æ®æ¨¡å‹](#æ•°æ®æ¨¡å‹)
- [APIæ¥å£](#apiæ¥å£)
- [æœåŠ¡å±‚è¯¦è§£](#æœåŠ¡å±‚è¯¦è§£)
- [è·¯ç”±ç³»ç»Ÿ](#è·¯ç”±ç³»ç»Ÿ)
- [çŠ¶æ€ç®¡ç†](#çŠ¶æ€ç®¡ç†)
- [å®æ—¶é€šä¿¡](#å®æ—¶é€šä¿¡)
- [å®‰å…¨ä¸è®¤è¯](#å®‰å…¨ä¸è®¤è¯)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [éƒ¨ç½²è¯´æ˜](#éƒ¨ç½²è¯´æ˜)

---

## é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®ç®€ä»‹

**Zenify** æ˜¯ä¸€ä¸ªåŸºäº Flutter å¼€å‘çš„è·¨å¹³å°æ™ºèƒ½å¥åº·é¥®é£Ÿç®¡ç†åº”ç”¨ï¼Œé›†æˆäº† AI è¥å…»åˆ†æã€å›¾åƒè¯†åˆ«ã€å®æ—¶é€šä¿¡ã€è¯­éŸ³äº¤äº’ç­‰å…ˆè¿›æŠ€æœ¯ï¼Œä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„é¥®é£Ÿå»ºè®®å’Œå¥åº·ç®¡ç†æœåŠ¡ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ¨ **æ™ºèƒ½æ³¨å†Œç³»ç»Ÿ**ï¼šåŸºäºå¹´é¾„æ€§åˆ«çš„è‡ªé€‚åº”é—®å·
- ğŸ¤– **AI è¥å…»åˆ†æ**ï¼šå®æ—¶é¥®é£Ÿå¥åº·åº¦è¯„ä¼°
- ğŸ“¸ **å›¾åƒè¯†åˆ«**ï¼šæ‹ç…§è¯†åˆ«é£Ÿç‰©æˆåˆ†
- ğŸ’¬ **æ™ºèƒ½å¯¹è¯**ï¼šå¤šæ¨¡æ€ AI è¥å…»é¡¾é—®
- ğŸ“Š **å¥åº·æŠ¥å‘Š**ï¼šå¯è§†åŒ–è¥å…»æ•°æ®åˆ†æ
- ğŸ”„ **å®æ—¶åŒæ­¥**ï¼šMQTT å®æ—¶çŠ¶æ€æ¨é€
- ğŸ¤ **è¯­éŸ³äº¤äº’**ï¼šè¯­éŸ³è¾“å…¥è¯†åˆ«
- ğŸ“± **è·¨å¹³å°**ï¼šæ”¯æŒ iOSã€Androidã€Webã€æ¡Œé¢ç«¯

### åº”ç”¨æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Flutter åº”ç”¨å±‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  æ³¨å†Œæµç¨‹ â”‚ â”‚   ä¸»é¡µ   â”‚ â”‚ AI èŠå¤©  â”‚ â”‚ å¥åº·æŠ¥å‘Š â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   ç›¸æœº   â”‚ â”‚  ä¸ªäººä¸­å¿ƒâ”‚ â”‚  èœå•    â”‚ â”‚ è®¾å¤‡ç®¡ç† â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æœåŠ¡å±‚ (Services)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Api Service  â”‚ â”‚MQTT Service  â”‚ â”‚AI Stream     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚User Session  â”‚ â”‚Speech Serviceâ”‚ â”‚Upload Serviceâ”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åç«¯ API æœåŠ¡                             â”‚
â”‚  åœ°å€: http://118.195.149.172:8000                          â”‚
â”‚  åè®®: RESTful API + MQTT                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|-----|------|------|
| Flutter | >=3.3.0 | UI æ¡†æ¶ |
| Dart | >=3.3.0 | ç¼–ç¨‹è¯­è¨€ |
| Provider | ^6.0.0 | çŠ¶æ€ç®¡ç† |
| MQTT Client | ^10.0.0 | å®æ—¶æ¶ˆæ¯æ¨é€ |
| Speech to Text | ^7.3.0 | è¯­éŸ³è¯†åˆ« |
| Camera | ^0.11.1+4 | ç›¸æœºåŠŸèƒ½ |
| Image Picker | ^1.1.2 | å›¾ç‰‡é€‰æ‹© |
| FL Chart | ^0.65.0 | å›¾è¡¨ç»˜åˆ¶ |
| HTTP | ^1.6.0 | ç½‘ç»œè¯·æ±‚ |
| Shared Preferences | ^2.2.2 | æœ¬åœ°å­˜å‚¨ |
| Cached Network Image | ^3.3.0 | å›¾ç‰‡ç¼“å­˜ |
| Carousel Slider | ^5.1.1 | è½®æ’­ç»„ä»¶ |
| Gradient Borders | ^1.0.2 | æ¸å˜è¾¹æ¡† |
| Permission Handler | ^11.3.1 | æƒé™ç®¡ç† |
| Mobile Scanner | ^5.0.0 | äºŒç»´ç æ‰«æ |
| Intl | ^0.20.2 | å›½é™…åŒ– |

### åç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç”¨é€” |
|-----|------|
| RESTful API | æ ¸å¿ƒä¸šåŠ¡æ¥å£ |
| MQTT 3.1.1 | å®æ—¶æ¶ˆæ¯æ¨é€ |
| WebSocket (æ¨æµ‹) | é•¿è¿æ¥é€šä¿¡ |

---

## æ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Presentation Layer                        â”‚
â”‚  (UI Components, Pages, Widgets)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Business Logic Layer                    â”‚
â”‚  (Providers, Controllers, Validators)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Services Layer                         â”‚
â”‚  (Network, MQTT, Speech, Cache, Upload)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Data Layer                            â”‚
â”‚  (Models, Enums, Cache, Storage)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„

```
lib/
â”œâ”€â”€ main.dart                          # åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ core/                             # æ ¸å¿ƒé…ç½®
â”‚   â””â”€â”€ app_export.dart               # å…¨å±€å¯¼å‡º
â”‚
â”œâ”€â”€ models/                           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ advanced_health_info.dart    # é«˜çº§å¥åº·ä¿¡æ¯
â”‚   â”œâ”€â”€ dish.dart                     # èœå“æ¨¡å‹
â”‚   â”œâ”€â”€ enums.dart                    # æšä¸¾å®šä¹‰
â”‚   â”œâ”€â”€ health_goal_model.dart        # å¥åº·ç›®æ ‡
â”‚   â”œâ”€â”€ meal_record.dart              # é¥®é£Ÿè®°å½•
â”‚   â”œâ”€â”€ message.dart                  # æ¶ˆæ¯æ¨¡å‹
â”‚   â”œâ”€â”€ registration_state.dart      # æ³¨å†ŒçŠ¶æ€
â”‚   â””â”€â”€ user_health_goals.dart        # ç”¨æˆ·å¥åº·ç›®æ ‡
â”‚
â”œâ”€â”€ presentation/                      # UI å±‚
â”‚   â”œâ”€â”€ main_page.dart                # ä¸»é¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ home/                         # ä¸»é¡µæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ index.dart               # ä¸»é¡µ (EAT/ATE)
â”‚   â”‚   â””â”€â”€ meal_analysis_report.dart # é¤é£Ÿåˆ†ææŠ¥å‘Š
â”‚   â”‚
â”‚   â”œâ”€â”€ registration/                 # æ³¨å†Œæµç¨‹
â”‚   â”‚   â”œâ”€â”€ registration_flow.dart    # æµç¨‹å…¥å£
â”‚   â”‚   â”œâ”€â”€ basic_info_page.dart      # æ­¥éª¤1: åŸºæœ¬ä¿¡æ¯
â”‚   â”‚   â”œâ”€â”€ smart_questionnaire_page.dart # æ­¥éª¤2: æ™ºèƒ½é—®å·
â”‚   â”‚   â”œâ”€â”€ goals_page.dart           # æ­¥éª¤3: ç›®æ ‡æ¨è
â”‚   â”‚   â”œâ”€â”€ advanced_info_page.dart   # æ­¥éª¤4: é«˜çº§ä¿¡æ¯
â”‚   â”‚   â””â”€â”€ questionnaire_widgets/    # é—®å·ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ child_questionnaire_widget.dart
â”‚   â”‚       â”œâ”€â”€ teenager_questionnaire_widget.dart
â”‚   â”‚       â”œâ”€â”€ adult_male_questionnaire_widget.dart
â”‚   â”‚       â”œâ”€â”€ adult_female_questionnaire_widget.dart
â”‚   â”‚       â”œâ”€â”€ middle_age_questionnaire_widget.dart
â”‚   â”‚       â””â”€â”€ elderly_questionnaire_widget.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ camera/                       # ç›¸æœºæ¨¡å—
â”‚   â”‚   â””â”€â”€ camera_page.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ ai_chat/                      # AI èŠå¤©
â”‚   â”‚   â””â”€â”€ ai_chat_page.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ report/                       # æŠ¥å‘Šæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ report.dart
â”‚   â”‚   â”œâ”€â”€ report_page.dart
â”‚   â”‚   â”œâ”€â”€ report_detail.dart
â”‚   â”‚   â””â”€â”€ report_random_word_cloud.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ profile/                      # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â””â”€â”€ profile_page.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ menu/                         # èœå•æ¨¡å—
â”‚   â”‚   â””â”€â”€ menu_page.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ dish_detail/                  # èœå“è¯¦æƒ…
â”‚   â”‚   â””â”€â”€ dish_detail_page.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ recipe/                       # é£Ÿè°±æ¨¡å—
â”‚   â”‚   â””â”€â”€ recipe_list.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ qr_scanner/                   # äºŒç»´ç æ‰«æ
â”‚   â”‚   â””â”€â”€ qr_scanner_page.dart
â”‚   â”‚
â”‚   â””â”€â”€ ...                          # å…¶ä»–é¡µé¢
â”‚
â”œâ”€â”€ providers/                        # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ registration_provider.dart    # æ³¨å†ŒçŠ¶æ€ç®¡ç†
â”‚
â”œâ”€â”€ services/                         # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ api.dart                      # API ä¸šåŠ¡å±‚
â”‚   â”œâ”€â”€ api_service.dart              # HTTP åº•å±‚æœåŠ¡
â”‚   â”œâ”€â”€ service_config.dart           # API é…ç½®ä¸­å¿ƒ
â”‚   â”œâ”€â”€ user_session.dart             # ç”¨æˆ·ä¼šè¯ç®¡ç†
â”‚   â”œâ”€â”€ user_data_cache.dart          # ç”¨æˆ·æ•°æ®ç¼“å­˜
â”‚   â”œâ”€â”€ mqtt_service.dart             # MQTT å®æ—¶æ¨é€
â”‚   â”œâ”€â”€ speech_to_text_service.dart   # è¯­éŸ³è¯†åˆ«æœåŠ¡
â”‚   â”œâ”€â”€ ai_stream.dart                # AI æµå¼å¯¹è¯
â”‚   â”œâ”€â”€ upload_service.dart           # æ–‡ä»¶ä¸Šä¼ æœåŠ¡
â”‚   â””â”€â”€ dish_service.dart             # èœå“æ•°æ®æœåŠ¡
â”‚
â”œâ”€â”€ routes/                           # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ app_routes.dart               # è·¯ç”±å®šä¹‰
â”‚
â”œâ”€â”€ theme/                            # ä¸»é¢˜é…ç½®
â”‚   â”œâ”€â”€ theme_helper.dart             # ä¸»é¢˜è¾…åŠ©
â”‚   â””â”€â”€ text_style_helper.dart        # æ–‡æœ¬æ ·å¼
â”‚
â”œâ”€â”€ utils/                            # å·¥å…·ç±»
â”‚   â”œâ”€â”€ questionnaire_utils.dart      # é—®å·å·¥å…·
â”‚   â”œâ”€â”€ goal_recommendation_engine.dart # ç›®æ ‡æ¨èå¼•æ“
â”‚   â”œâ”€â”€ file_handling_utils.dart      # æ–‡ä»¶å¤„ç†
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ widgets/                          # è‡ªå®šä¹‰ç»„ä»¶
â”‚   â”œâ”€â”€ custom_button.dart           # è‡ªå®šä¹‰æŒ‰é’®
â”‚   â”œâ”€â”€ custom_dropdown.dart         # ä¸‹æ‹‰é€‰æ‹©
â”‚   â”œâ”€â”€ custom_gradient_text_field.dart # æ¸å˜è¾“å…¥æ¡†
â”‚   â”œâ”€â”€ custom_icon_button.dart      # å›¾æ ‡æŒ‰é’®
â”‚   â”œâ”€â”€ custom_image_view.dart        # å›¾ç‰‡è§†å›¾
â”‚   â”œâ”€â”€ custom_progress_app_bar.dart  # è¿›åº¦æ¡
â”‚   â””â”€â”€ bottom_input_section.dart     # åº•éƒ¨è¾“å…¥åŒº
â”‚
â””â”€â”€ components/                       # é€šç”¨ç»„ä»¶
    â”œâ”€â”€ common_card.dart              # é€šç”¨å¡ç‰‡
    â””â”€â”€ food_item_card.dart           # é£Ÿç‰©å¡ç‰‡
```

---

## æ ¸å¿ƒåŠŸèƒ½

### 1. ç”¨æˆ·æ³¨å†Œä¸å¼•å¯¼

#### 1.1 æ™ºèƒ½æ³¨å†Œæµç¨‹ (4æ­¥)

```mermaid
graph LR
    A[æ­¥éª¤1: åŸºæœ¬ä¿¡æ¯] --> B[æ­¥éª¤2: æ™ºèƒ½é—®å·]
    B --> C[æ­¥éª¤3: ç›®æ ‡æ¨è]
    C --> D[æ­¥éª¤4: é«˜çº§ä¿¡æ¯<br/>å¯é€‰]
    D --> E[å®Œæˆæ³¨å†Œ]
```

**æ­¥éª¤1: åŸºæœ¬ä¿¡æ¯**
- æ”¶é›†ï¼šå§“åã€æ€§åˆ«ã€å‡ºç”Ÿæ—¥æœŸ
- éªŒè¯ï¼šå§“åæ ¼å¼éªŒè¯ï¼ˆ2-20å­—ç¬¦ï¼Œæ”¯æŒä¸­è‹±æ–‡æ•°å­—ï¼‰
- æ˜¾ç¤ºï¼šå®æ—¶å¹´é¾„è®¡ç®—

**æ­¥éª¤2: æ™ºèƒ½é—®å·è°ƒæŸ¥**

| å¹´é¾„æ®µ | æ€§åˆ« | é—®å·ç±»å‹ | æ”¶é›†æ•°æ® |
|--------|------|----------|----------|
| â‰¤12å² | ä»»æ„ | å„¿ç«¥é—®å· | å­¦ç§‘å…´è¶£ã€è¯¾å¤–æ´»åŠ¨ã€æ—©é¤ä¹ æƒ¯ã€æ°´æœåå¥½ã€è¿åŠ¨å¤©æ•° |
| 13-18å² | ä»»æ„ | é’å°‘å¹´é—®å· | èŒä¸šè§„åˆ’ã€å…´è¶£çˆ±å¥½ã€ç¡çœ æ—¶é•¿ã€è®¾å¤‡ä½¿ç”¨ã€è¿åŠ¨æ—¶é•¿ |
| 19-45å² | ç”·æ€§ | æˆå¹´ç”·æ€§é—®å· | å·¥ä½œæ—¶é•¿ã€å·¥ä½œå‹åŠ›ã€ä½“æ£€é¢‘ç‡ã€è¿åŠ¨æ—¶é•¿ã€é¥®é£Ÿå…³æ³¨ |
| 19-45å² | å¥³æ€§ | æˆå¹´å¥³æ€§é—®å· | å·¥ä½œæ—¶é•¿ã€å·¥ä½œå‹åŠ›ã€æœˆç»è§„å¾‹ã€å¦‡ç§‘æ£€æŸ¥ã€è¿åŠ¨æ—¶é•¿ |
| 46-65å² | ä»»æ„ | ä¸­å¹´äººé—®å· | æ…¢æ€§ç—…ã€ä½“é‡ç®¡ç†ã€ä½“æ£€é¢‘ç‡ã€ç”¨è¯æ•°é‡ã€è¿åŠ¨æ—¶é•¿ |
| >65å² | ä»»æ„ | è€å¹´äººé—®å· | ä¸»è¦ç–¾ç—…ã€ç”¨è¯æ•°é‡ã€è¡ŒåŠ¨èƒ½åŠ›ã€è®¤çŸ¥åŠŸèƒ½ã€ç¤¾äº¤æ—¶é•¿ |

**æ­¥éª¤3: å¥åº·ç›®æ ‡æ¨è**

AI æ¨èå¼•æ“åŸºäºä»¥ä¸‹å› ç´ ç”Ÿæˆä¸ªæ€§åŒ–ç›®æ ‡ï¼š
- å¹´é¾„å’Œæ€§åˆ«
- é—®å·æ•°æ®ï¼ˆå·¥ä½œå‹åŠ›ã€è¿åŠ¨æ—¶é•¿ã€ç¡çœ æƒ…å†µã€æ…¢æ€§ç—…ç­‰ï¼‰
- é¢„è®¾è§„åˆ™å¼•æ“

ç›®æ ‡åˆ†ç±»ï¼š
- è¥å…»ç±»ï¼šå‡è¡¡é¥®é£Ÿã€è¡¥å……ç»´ç”Ÿç´ ã€æ§åˆ¶çƒ­é‡ç­‰
- è¿åŠ¨ç±»ï¼šè§„å¾‹è¿åŠ¨ã€å¢åŠ è¿åŠ¨é‡ç­‰
- å¥åº·ç±»ï¼šæ…¢æ€§ç—…ç®¡ç†ã€ç¡çœ æ”¹å–„ã€å‹åŠ›é‡Šæ”¾ç­‰

ä¼˜å…ˆçº§ç³»ç»Ÿï¼š
- ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼šç´§æ€¥éœ€è¦å…³æ³¨çš„å¥åº·é—®é¢˜
- ğŸŸ  ä¸­ä¼˜å…ˆçº§ï¼šå»ºè®®æ”¹å–„çš„å¥åº·ä¹ æƒ¯
- ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼šé•¿æœŸç»´æŠ¤çš„å¥åº·ç›®æ ‡

**æ­¥éª¤4: é«˜çº§å¥åº·ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰**
- æ…¢æ€§ç—…å²ï¼ˆå¤šé€‰ï¼‰
- é£Ÿç‰©è¿‡æ•ï¼ˆè‡ªå®šä¹‰æ ‡ç­¾è¾“å…¥ï¼‰
- å½“å‰ç”¨è¯ï¼ˆå¤šè¡Œæ–‡æœ¬ï¼‰
- ä½“æ£€æŠ¥å‘Šä¸Šä¼ ï¼ˆæœ€å¤š5ä¸ªæ–‡ä»¶ï¼‰

#### 1.2 ä¼ ç»Ÿç”¨æˆ·èµ„æ–™è®¾ç½®

```
ç”¨æˆ·èµ„æ–™è®¾ç½® â†’ æ€§åˆ«/ä½“é‡/èº«é«˜/å¹´é¾„ â†’ ç›®æ ‡é€‰æ‹© â†’ åˆ†æ”¯æµç¨‹
                                                          â†“
                                    æ…¢æ€§ç—… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ç¬¬ä¸‰é—®é¡µé¢
                                    å…¶ä»– â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ åå¥½é€‰æ‹©é¡µ
```

### 2. é¥®é£Ÿç®¡ç†ä¸»é¡µ

#### 2.1 EAT æ ‡ç­¾ï¼ˆä»Šæ—¥è®¡åˆ’ï¼‰

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- æ˜¾ç¤ºç”¨æˆ·ä»Šæ—¥é¥®é£Ÿè®¡åˆ’ï¼ˆæ—©é¤ã€åˆé¤ã€æ™šé¤ï¼‰
- æ”¯æŒæŸ¥çœ‹æ•´å‘¨è®¡åˆ’ï¼ˆå‘¨ä¸€è‡³å‘¨æ—¥ï¼‰
- ç‚¹å‡»é£Ÿç‰©å¯æ›¿æ¢ä¸ºå…¶ä»–é£Ÿæ
- æ”¶è—å–œæ¬¢çš„é¤é£Ÿ
- æ™ºèƒ½é¤ç›˜çŠ¶æ€æ˜¾ç¤º

**æ•°æ®æµç¨‹ï¼š**
```
1. åŠ è½½ç”¨æˆ·å½“å‰é£Ÿè°±
   â†“
2. æŒ‰é¤é£Ÿç±»å‹åˆ†ç»„
   â†“
3. æŒ‰æ—¥æœŸè¿‡æ»¤
   â†“
4. æ¸²æŸ“å¡ç‰‡åˆ—è¡¨
```

#### 2.2 ATE æ ‡ç­¾ï¼ˆå†å²è®°å½•ï¼‰

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- æŸ¥çœ‹å†å²é¥®é£Ÿè®°å½•
- æŒ‰é¤é£Ÿç±»å‹åˆ†ç»„å±•ç¤º
- æ˜¾ç¤ºå›¾åƒè¯†åˆ«çš„é¤é£Ÿ
- æ”¶è—çŠ¶æ€ç®¡ç†

**MQTT å®æ—¶æ›´æ–°ï¼š**
```dart
// è®¢é˜…ä¸»é¢˜
user/{userId}/recognition_started   // è¯†åˆ«å¼€å§‹
user/{userId}/recognition_completed  // è¯†åˆ«å®Œæˆ
```

### 3. å›¾åƒè¯†åˆ«

#### 3.1 æ‹ç…§æµç¨‹

```
æ‰“å¼€ç›¸æœº â†’ æ‹ç…§ â†’ é¢„è§ˆ â†’ ä¸Šä¼  â†’ è§¦å‘è¯†åˆ« â†’ MQTT æ¨é€ â†’ è·³è½¬æŸ¥çœ‹ç»“æœ
```

**æŠ€æœ¯å®ç°ï¼š**
- ä½¿ç”¨ `camera` åŒ…è°ƒç”¨ç›¸æœº
- ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼š`POST /api/mqtt/users/{userId}/plates/{plateId}/recognize/upload`
- è§¦å‘è¯†åˆ«ï¼š`POST /api/mqtt/users/{userId}/plates/{plateId}/recognize`
- MQTT ç›‘å¬ï¼šå®æ—¶æ¥æ”¶è¯†åˆ«çŠ¶æ€

**ç›¸æœºåŠŸèƒ½ï¼š**
- å®æ—¶é¢„è§ˆ
- æ‹ç…§
- ç›¸å†Œé€‰æ‹©
- å‰åæ‘„åƒå¤´åˆ‡æ¢

#### 3.2 å›¾åƒè¯†åˆ«ç»“æœ

**è·å–è¯†åˆ«è®°å½•ï¼š**
```dart
GET /api/v1/users/recognitions           // æ‰€æœ‰è®°å½•
GET /api/v1/users/recognitions/latest     // æœ€æ–°è®°å½•
```

### 4. AI æ™ºèƒ½å¯¹è¯

#### 4.1 å¯¹è¯åŠŸèƒ½

**æ”¯æŒçš„è¾“å…¥æ–¹å¼ï¼š**
- æ–‡å­—è¾“å…¥
- å›¾ç‰‡ä¸Šä¼ 
- è¯­éŸ³è½¬æ–‡å­—

**æµå¼å“åº”ï¼š**
```
ç”¨æˆ·å‘é€æ¶ˆæ¯ â†’ AI å¤„ç† â†’ æµå¼è¿”å›ç»“æœ â†’ é€è¡Œæ¸²æŸ“
```

**API ç«¯ç‚¹ï¼š**
```
POST /api/v1/chat              // æ–‡æœ¬å¯¹è¯
POST /api/v1/chat/with-file    // å¸¦æ–‡ä»¶çš„å¯¹è¯
```

#### 4.2 è¯­éŸ³è¯†åˆ«

**åŠŸèƒ½ï¼š**
- æ”¯æŒå¤šè¯­è¨€ï¼ˆé»˜è®¤ä¸­æ–‡ zh_CNï¼‰
- å®æ—¶è¯­éŸ³è¯†åˆ«
- éŸ³é‡åé¦ˆ
- è‡ªåŠ¨æƒé™ç®¡ç†

**ä½¿ç”¨æ–¹æ³•ï¼š**
```dart
final speechService = SpeechToTextService();
await speechService.startListening(
  onResult: (text) => print(text),
);
```

#### 4.3 UI è®¾è®¡

**è§†è§‰é£æ ¼ï¼š**
- é»‘å®¢å¸å›½é£æ ¼èƒŒæ™¯
- æ•°ç é›¨åŠ¨ç”»æ•ˆæœ
- åŠ¨æ€ AI å¤´åƒ
- æ¸å˜è‰²æŒ‰é’®

### 5. å¥åº·æŠ¥å‘Š

#### 5.1 æŠ¥å‘Šé¡µ

**åŠŸèƒ½ï¼š**
- å±•ç¤ºæ‰€æœ‰é¥®é£Ÿè®°å½•
- ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š
- æŒ‰æ—¶é—´æ’åº

#### 5.2 æŠ¥å‘Šè¯¦æƒ…

**å±•ç¤ºå†…å®¹ï¼š**
- è¥å…»æˆåˆ†å›¾è¡¨ï¼ˆè›‹ç™½è´¨ã€è„‚è‚ªã€ç¢³æ°´ï¼‰
- ç»´ç”Ÿç´ æ¸…å•
- è¡€ç³–æ•°æ®æ›²çº¿
- å¥åº·è¯„åˆ†
- è¥å…»ç´ é›·è¾¾å›¾

**å›¾è¡¨åº“ï¼š**
- ä½¿ç”¨ `fl_chart` ç»˜åˆ¶å„ç§å›¾è¡¨
- æ”¯æŒæŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€é›·è¾¾å›¾

### 6. èœå•ä¸é£Ÿç‰©ç®¡ç†

#### 6.1 èœå•é¡µ

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- å‚ç›´å¡ç‰‡æ»‘åŠ¨å±•ç¤º
- 3D æ—‹è½¬æ•ˆæœ
- æ ‡ç­¾ç­›é€‰
- é£Ÿç‰©æ›¿æ¢

**äº¤äº’æ•ˆæœï¼š**
```dart
Matrix4.identity()
  ..setEntry(3, 2, 0.002)
  ..rotateX(value * 0.03)
  ..rotateZ(value * 0.1)
```

**é£Ÿç‰©æ•°æ®ï¼š**
- æ”¯æŒæŒ‰åˆ†ç±»ç­›é€‰
- æ”¯æŒæŒ‰å­åˆ†ç±»ç­›é€‰
- æ˜¾ç¤ºé£Ÿç‰©å›¾ç‰‡ã€åç§°ã€åˆ†é‡

#### 6.2 é£Ÿç‰©æ›¿æ¢

**APIï¼š**
```dart
PUT /api/v1/plan/foods/replace/{plan_food_id}
```

**æµç¨‹ï¼š**
1. æ‰“å¼€èœå•é¡µ
2. é€‰æ‹©æ–°é£Ÿç‰©
3. ç¡®è®¤æ›¿æ¢
4. æ›´æ–°è®¡åˆ’

### 7. ä¸ªäººä¸­å¿ƒ

#### 7.1 èµ„æ–™ç®¡ç†

**å±•ç¤ºä¿¡æ¯ï¼š**
- ç”¨æˆ·å
- é‚®ç®±
- å¤´åƒ
- è®¾å¤‡åˆ—è¡¨

**åŠŸèƒ½ï¼š**
- æ›´æ–°ä¸ªäººèµ„æ–™
- ç»‘å®š/è§£ç»‘è®¾å¤‡
- æ‰«æäºŒç»´ç 

#### 7.2 è®¾å¤‡ç®¡ç†

**APIï¼š**
```dart
POST /api/v1/plates/bind              // ç»‘å®šè®¾å¤‡
POST /api/v1/plates/unbind            // è§£ç»‘è®¾å¤‡
GET  /api/v1/plates/user/my-devices   // è·å–è®¾å¤‡åˆ—è¡¨
```

**äºŒç»´ç æ‰«æï¼š**
- ä½¿ç”¨ `mobile_scanner` åŒ…
- æ‰«æè®¾å¤‡äºŒç»´ç 
- è‡ªåŠ¨ç»‘å®šè®¾å¤‡

---

## æ•°æ®æ¨¡å‹

### æ ¸å¿ƒæ•°æ®æ¨¡å‹

#### UserRegistrationData

```dart
class UserRegistrationData {
  // æ­¥éª¤1: åŸºæœ¬ä¿¡æ¯
  String? name;              // å§“å
  String? gender;            // æ€§åˆ«
  DateTime? birthDate;       // å‡ºç”Ÿæ—¥æœŸ

  // æ­¥éª¤2: é—®å·æ•°æ®
  Map<String, dynamic>? questionnaireData;

  // æ­¥éª¤3: å¥åº·ç›®æ ‡
  List<String>? selectedGoalIds;

  // æ­¥éª¤4: é«˜çº§ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
  AdvancedHealthInfo? advancedInfo;

  // è´¦æˆ·ä¿¡æ¯
  String? email;
  String? password;
  String? confirmPassword;
}
```

#### AdvancedHealthInfo

```dart
class AdvancedHealthInfo {
  List<String> chronicDiseases;      // æ…¢æ€§ç—…åˆ—è¡¨
  List<String> foodAllergies;        // é£Ÿç‰©è¿‡æ•åˆ—è¡¨
  String? currentMedications;        // å½“å‰ç”¨è¯
  List<String> reportFiles;          // ä½“æ£€æŠ¥å‘Šæ–‡ä»¶
}
```

#### MealRecord

```dart
class MealRecord {
  String id;
  String userId;
  String plateId;
  MealType mealType;                 // é¤é£Ÿç±»å‹
  DateTime timestamp;
  List<FoodItem> foods;              // é£Ÿç‰©åˆ—è¡¨
  NutritionInfo nutrition;           // è¥å…»ä¿¡æ¯
  double score;                      // å¥åº·è¯„åˆ†
  String imageUrl;                   // é¤é£Ÿå›¾ç‰‡
}
```

#### HealthGoal

```dart
class HealthGoal {
  String id;
  String name;
  String description;
  GoalCategory category;             // ç›®æ ‡ç±»åˆ«
  Priority priority;                 // ä¼˜å…ˆçº§
  String icon;
}
```

### æšä¸¾ç±»å‹

#### MealTypeï¼ˆé¤é£Ÿç±»å‹ï¼‰

```dart
enum MealType {
  breakfast,      // æ—©é¤
  lunch,          // ä¸­é¤
  dinner,         // æ™šé¤
  snack,          // é›¶é£Ÿ
  brunch,         // æ—©åˆé¤
  afternoonTea,   // ä¸‹åˆèŒ¶
  midnightSnack,  // å®µå¤œ
  extraMeal,      // åŠ é¤
}
```

#### FoodCategoryï¼ˆé£Ÿç‰©åˆ†ç±»ï¼‰

```dart
enum FoodCategory {
  vegetable,      // è”¬èœ
  fruit,          // æ°´æœ
  protein,        // è›‹ç™½è´¨
  carbohydrate,   // ç¢³æ°´
  fat,            // è„‚è‚ª
  other,          // å…¶ä»–
}
```

#### IngredientTypeï¼ˆé£Ÿæç±»å‹ï¼‰

```dart
enum IngredientType {
  fresh,          // æ–°é²œé£Ÿæ
  packaged,       // åŒ…è£…é£Ÿæ
}
```

#### PlanStatusï¼ˆè®¡åˆ’çŠ¶æ€ï¼‰

```dart
enum PlanStatus {
  active,         // è¿›è¡Œä¸­
  completed,      // å·²å®Œæˆ
  paused,         // æš‚åœ
}
```

---

## API æ¥å£

### åŸºç¡€é…ç½®

```dart
Base URL: http://118.195.149.172:8000
API Version: /api/v1
MQTT Broker: 118.195.149.172:1883
Timeout: 30 seconds
```

### ç”¨æˆ·è®¤è¯

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|-----|------|------|
| POST | `/api/v1/users/login` | ç”¨æˆ·ç™»å½• |
| POST | `/api/v1/users/register` | ç”¨æˆ·æ³¨å†Œ |
| GET | `/api/v1/users/{user_id}` | è·å–ç”¨æˆ·ä¿¡æ¯ |
| PUT | `/api/v1/users/{user_id}/profile` | æ›´æ–°ç”¨æˆ·èµ„æ–™ |
| GET | `/api/v1/users/{user_id}/profile` | è·å–ç”¨æˆ·è¯¦ç»†èµ„æ–™ |

### é£Ÿè°±ç®¡ç†

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|-----|------|------|
| POST | `/api/v1/recipes` | åˆ›å»ºé£Ÿè°± |
| GET | `/api/v1/recipes` | è·å–é£Ÿè°±åˆ—è¡¨ |
| GET | `/api/v1/recipes/{recipe_id}` | è·å–é£Ÿè°±è¯¦æƒ… |
| POST | `/api/v1/recipes/{recipe_id}/foods` | æ·»åŠ é£Ÿç‰©åˆ°é£Ÿè°± |
| GET | `/api/v1/recipes/{recipe_id}/meal-plan` | è·å–é£Ÿè°±è®¡åˆ’ |

### é£Ÿè°±è®¡åˆ’

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|-----|------|------|
| POST | `/api/v1/users/{user_id}/recipe-plans` | åˆ›å»ºé£Ÿè°±è®¡åˆ’ |
| GET | `/api/v1/users/{user_id}/recipe-plans` | è·å–ç”¨æˆ·é£Ÿè°±è®¡åˆ’ |
| GET | `/api/v1/users/{user_id}/recipe-plans/{plan_id}` | è·å–è®¡åˆ’è¯¦æƒ… |
| PUT | `/api/v1/users/{user_id}/recipe-plans/{plan_id}/status` | æ›´æ–°è®¡åˆ’çŠ¶æ€ |
| GET | `/api/v1/users/{user_id}/recipe-plans/current` | è·å–å½“å‰ç”¨æˆ·é£Ÿè°± |
| PUT | `/api/v1/users/{user_id}/recipe-plans/update` | æ›´æ–°ç”¨æˆ·é£Ÿè°± |

### é£Ÿç‰©ç®¡ç†

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|-----|------|------|
| GET | `/api/v1/foods` | è·å–é£Ÿç‰©åˆ—è¡¨ |
| GET | `/api/v1/foods/{food_id}` | è·å–é£Ÿç‰©è¯¦æƒ… |
| POST | `/api/v1/foods` | åˆ›å»ºé£Ÿç‰© |
| GET | `/api/v1/foods/categories` | è·å–é£Ÿç‰©åˆ†ç±» |
| GET | `/api/v1/foods/subcategories` | è·å–é£Ÿç‰©å­åˆ†ç±» |
| GET | `/api/v1/users/{user_id}/recipe-plans/current/foods` | è·å–ç”¨æˆ·é£Ÿç‰©æ•°æ® |
| PUT | `/api/v1/plan/foods/replace/{plan_food_id}` | æ›¿æ¢è®¡åˆ’é£Ÿç‰© |
| PUT | `/api/v1/users/{user_id}/replace/foods` | æ•´é¤åˆ‡æ¢ |

### é¥®é£Ÿè®°å½•

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|-----|------|------|
| GET | `/api/v1/users/{user_id}/plates/{plate_id}/meal-records/today` | è·å–å½“å¤©é¥®é£Ÿè®°å½• |
| GET | `/api/v1/users/{user_id}/plates/{plate_id}/meal-records/{meal_record_id}` | è·å–é¥®é£Ÿè®°å½•è¯¦æƒ… |
| GET | `/api/v1/users/recognitions` | è·å–è¯†åˆ«è®°å½• |
| GET | `/api/v1/users/recognitions/latest` | è·å–æœ€æ–°è¯†åˆ«è®°å½• |

### å›¾åƒè¯†åˆ«

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|-----|------|------|
| POST | `/api/mqtt/users/{user_id}/plates/{plate_id}/recognize` | è§¦å‘å›¾åƒè¯†åˆ« |
| POST | `/api/mqtt/users/{user_id}/plates/{plate_id}/recognize/upload` | ä¸Šä¼ å›¾åƒç”¨äºè¯†åˆ« |

### AI å¯¹è¯

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|-----|------|------|
| POST | `/api/v1/chat` | AI æ–‡æœ¬å¯¹è¯ |
| POST | `/api/v1/chat/with-file` | AI å¤šæ¨¡æ€å¯¹è¯ï¼ˆå¸¦æ–‡ä»¶ï¼‰ |

### è®¾å¤‡ç®¡ç†

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|-----|------|------|
| POST | `/api/v1/plates/bind` | ç»‘å®šè®¾å¤‡ |
| POST | `/api/v1/plates/unbind` | è§£ç»‘è®¾å¤‡ |
| GET | `/api/v1/plates/user/my-devices` | è·å–ç”¨æˆ·è®¾å¤‡åˆ—è¡¨ |

### ç”¨æˆ·é£Ÿæ

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|-----|------|------|
| POST | `/api/v1/users/{userId}/ingredients` | åˆ›å»ºç”¨æˆ·é£Ÿæ |
| GET | `/api/v1/users/{userId}/ingredients` | è·å–ç”¨æˆ·é£Ÿæ |
| PUT | `/api/v1/users/{userId}/ingredients/{ingredientId}` | æ›´æ–°ç”¨æˆ·é£Ÿæ |
| DELETE | `/api/v1/users/{userId}/ingredients/{ingredientId}` | åˆ é™¤ç”¨æˆ·é£Ÿæ |

---

## æœåŠ¡å±‚è¯¦è§£

### 1. ApiServiceï¼ˆHTTP åº•å±‚æœåŠ¡ï¼‰

**èŒè´£ï¼š**
- å°è£… HTTP å®¢æˆ·ç«¯
- ç»Ÿä¸€é”™è¯¯å¤„ç†
- è‡ªåŠ¨æ·»åŠ è®¤è¯å¤´

**æ ¸å¿ƒæ–¹æ³•ï¼š**
```dart
// å‘é€è¯·æ±‚
Future<dynamic> request(
  ApiEndpoint endpoint,
  Map<String, dynamic>? data,
)

// è·å–è¯·æ±‚
Future<dynamic> get(ApiEndpoint endpoint, Map<String, dynamic>? params)

// POST è¯·æ±‚
Future<dynamic> post(ApiEndpoint endpoint, Map<String, dynamic>? data)

// PUT è¯·æ±‚
Future<dynamic> put(ApiEndpoint endpoint, Map<String, dynamic>? data)

// DELETE è¯·æ±‚
Future<dynamic> delete(ApiEndpoint endpoint)
```

**é”™è¯¯å¤„ç†ï¼š**
- 200/201: è¿”å› JSON æ•°æ®
- 204: è¿”å› null
- 400: Bad Request
- 401: Unauthorized
- 403: Forbidden
- 404: Not Found
- 500: Server Error

### 2. Apiï¼ˆä¸šåŠ¡ API å±‚ï¼‰

**èŒè´£ï¼š**
- æä¾›é«˜å±‚ä¸šåŠ¡ API
- è‡ªåŠ¨è·å– token
- ç±»å‹å®‰å…¨çš„æ•°æ®å¤„ç†

**æ ¸å¿ƒæ–¹æ³•åˆ†ç±»ï¼š**

**ç”¨æˆ·è®¤è¯ï¼š**
```dart
Future<dynamic> register(LoginRequest request)
Future<dynamic> login(LoginRequest request)
Future<UserInfo> getUserInfo()
```

**é£Ÿè°±ç®¡ç†ï¼š**
```dart
Future<List<Recipe>> getRecipes(RecipesRequest request)
Future<Recipe> getRecipesById(int id)
Future<dynamic> getCurrentUserRecipes()
Future<dynamic> updateCurrentUserRecipes(dynamic data)
```

**é£Ÿç‰©ç®¡ç†ï¼š**
```dart
Future<dynamic> getFoods(FoodsRequest request)
Future<dynamic> getCurrentUserFoods()
Future<dynamic> replacePlanFood(Map<String, dynamic> data)
```

**é¥®é£Ÿè®°å½•ï¼š**
```dart
Future<dynamic> getUserTodayMealRecords()
Future<dynamic> getMealRecordsDetail(String mealRecordId)
```

**å›¾åƒè¯†åˆ«ï¼š**
```dart
Future<dynamic> getRecognize()
Future<dynamic> getRecognitions()
Future<dynamic> getLatestRecognition()
```

**è®¾å¤‡ç®¡ç†ï¼š**
```dart
Future<dynamic> bindDevice(String deviceId)
Future<dynamic> unbindDevice(String deviceId)
Future<dynamic> getUserDevices()
```

### 3. MQTTServiceï¼ˆå®æ—¶æ¶ˆæ¯æ¨é€ï¼‰

**èŒè´£ï¼š**
- ç®¡ç† MQTT è¿æ¥
- è®¢é˜…ç”¨æˆ·ä¸“å±ä¸»é¢˜
- å®æ—¶æ¨é€è¯†åˆ«çŠ¶æ€

**é…ç½®ï¼š**
```dart
Broker: 118.195.149.172
Port: 1883
Protocol: MQTT 3.1.1
QoS: AtLeastOnce
Clean Session: true
```

**è®¢é˜…ä¸»é¢˜ï¼š**
```
user/{userId}/recognition_started    // è¯†åˆ«å¼€å§‹
user/{userId}/recognition_completed   // è¯†åˆ«å®Œæˆ
```

**ä½¿ç”¨æ–¹æ³•ï¼š**
```dart
final mqttService = MQTTService();

// ç›‘å¬çŠ¶æ€æµ
mqttService.statusStream.listen((status) {
  switch (status.status) {
    case RecognitionStatusType.analyzing:
      print('æ­£åœ¨åˆ†æ...');
      break;
    case RecognitionStatusType.completed:
      print('è¯†åˆ«å®Œæˆ');
      break;
  }
});
```

**çŠ¶æ€æšä¸¾ï¼š**
```dart
enum RecognitionStatusType {
  analyzing,
  completed,
}
```

### 4. UserSessionï¼ˆç”¨æˆ·ä¼šè¯ç®¡ç†ï¼‰

**èŒè´£ï¼š**
- ç®¡ç†ç”¨æˆ·ç™»å½•çŠ¶æ€
- æŒä¹…åŒ–å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
- ç®¡ç† plate_id

**å­˜å‚¨å­—æ®µï¼š**
```dart
access_token    // è®¿é—®ä»¤ç‰Œ
token_type      // ä»¤ç‰Œç±»å‹
user_id         // ç”¨æˆ·ID
name            // ç”¨æˆ·å
email           // é‚®ç®±
full_name       // å…¨å
phone           // ç”µè¯
source          // æ¥æº
created_at      // åˆ›å»ºæ—¶é—´
is_active       // æ˜¯å¦æ´»è·ƒ
plate_id        // è®¾å¤‡ID
```

**æ ¸å¿ƒæ–¹æ³•ï¼š**
```dart
// ç™»å½•
static Future<void> login(Map<String, dynamic> data)

// ç™»å‡º
static Future<void> logout()

// è·å–ç”¨æˆ·ID
static Future<String?> get userId

// è·å– token
static Future<String?> get token

// ä¿å­˜ plate_id
static Future<void> savePlateId(String plateId)
```

### 5. UserDataCacheï¼ˆç”¨æˆ·æ•°æ®ç¼“å­˜ï¼‰

**èŒè´£ï¼š**
- ç¼“å­˜ç”¨æˆ·è¯¦ç»†èµ„æ–™
- ç®¡ç†åº”ç”¨çŠ¶æ€
- é¤é£Ÿæ”¶è—ç®¡ç†

**ç¼“å­˜å†…å®¹ï¼š**
```dart
// ç”¨æˆ·èµ„æ–™
gender, weight, height, age
main_goal, chronic_diseases
dietary_preferences, food_sources
disliked_foods, eating_style
eating_routine, allergies
activity_level

// åº”ç”¨çŠ¶æ€
onboarding_complete

// é¤é£Ÿæ”¶è—
collected_meals
```

**æ ¸å¿ƒæ–¹æ³•ï¼š**
```dart
// ç”¨æˆ·èµ„æ–™
static Future<void> saveUserProfile(Map<String, dynamic> data)
static Future<Map<String, dynamic>?> getUserProfile()

// å¼•å¯¼çŠ¶æ€
static Future<void> markOnboardingComplete()
static Future<bool> isOnboardingComplete()

// é¤é£Ÿæ”¶è—
static Future<void> saveCollectedMeal(String mealId, String mealData)
static Future<void> removeCollectedMeal(String mealId)
static Future<Map<String, dynamic>> getCollectedMeals()
static Future<bool> isMealCollected(String mealId)
```

### 6. AiStreamï¼ˆAI æµå¼å¯¹è¯ï¼‰

**èŒè´£ï¼š**
- å¤„ç† AI å¯¹è¯è¯·æ±‚
- æ”¯æŒæµå¼å“åº”
- å¤šæ¨¡æ€è¾“å…¥æ”¯æŒ

**æ ¸å¿ƒæ–¹æ³•ï¼š**
```dart
// æµå¼æ–‡æœ¬å¯¹è¯
static Future<String> streamPost(
  String message,
  StreamController<String> streamController,
)

// æµå¼å¤šæ¨¡æ€å¯¹è¯ï¼ˆå¸¦æ–‡ä»¶ï¼‰
static Future<String> streamPostWithFiles(
  String message,
  List<File> files,
  StreamController<String> streamController,
)
```

**æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼š**
- å›¾ç‰‡: jpg, png, gif
- æ–‡æ¡£: pdf, doc, docx, txt

### 7. SpeechToTextServiceï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰

**èŒè´£ï¼š**
- è¯­éŸ³è½¬æ–‡å­—
- æƒé™ç®¡ç†
- å¤šè¯­è¨€æ”¯æŒ

**æ ¸å¿ƒæ–¹æ³•ï¼š**
```dart
// åˆå§‹åŒ–
Future<bool> initialize()

// å¼€å§‹è¯†åˆ«
Future<void> startListening({
  required Function(String) onResult,
  Function(String)? onError,
  Function(bool)? onListeningStateChanged,
  Function(double)? onSoundLevelChanged,
})

// åœæ­¢è¯†åˆ«
Future<void> stopListening()

// å–æ¶ˆè¯†åˆ«
Future<void> cancelListening()

// è·å–æ”¯æŒçš„è¯­è¨€
List<dynamic> getAvailableLanguages()

// è®¾ç½®è¯­è¨€
Future<void> setLanguage(String localeId)
```

### 8. UploadServiceï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰

**èŒè´£ï¼š**
- ä¸Šä¼ å›¾åƒåˆ°æœåŠ¡å™¨
- æ˜¾ç¤ºä¸Šä¼ è¿›åº¦

**æ ¸å¿ƒæ–¹æ³•ï¼š**
```dart
// ä¸Šä¼ å›¾ç‰‡
static Future<dynamic> uploadImage(File imageFile)
```

**ä¸Šä¼ ç«¯ç‚¹ï¼š**
```
POST /api/mqtt/users/{userId}/plates/{plateId}/recognize/upload
```

### 9. DishServiceï¼ˆèœå“æ•°æ®ç®¡ç†ï¼‰

**èŒè´£ï¼š**
- ç®¡ç†é¢„å®šä¹‰èœå“æ•°æ®
- æä¾›æŸ¥è¯¢æ¥å£

**èœå“åˆ†ç±»ï¼š**
- è‚‰ç±»ï¼ˆ8é“ï¼‰
- è”¬èœï¼ˆ9é“ï¼‰
- ç¢³æ°´ï¼ˆ9é“ï¼‰

**æ ¸å¿ƒæ–¹æ³•ï¼š**
```dart
// è·å–æ‰€æœ‰èœå“
static List<Dish> getAllDishes()

// æŒ‰åˆ†ç±»æŸ¥è¯¢
static List<Dish> getDishesByCategory(String category)

// æŒ‰åˆ†ç±»å’Œæ ‡ç­¾æŸ¥è¯¢
static List<Dish> getDishesByCategoryAndTag(
  String category,
  String tag,
)

// è·å–çƒ­é—¨èœå“
static List<Dish> getPopularDishes()

// æŒ‰ ID æŸ¥è¯¢
static Dish? getDishById(int id)

// æœç´¢èœå“
static List<Dish> searchDishes(String keyword)
```

---

## è·¯ç”±ç³»ç»Ÿ

### è·¯ç”±å®šä¹‰

```dart
class AppRoutes {
  // ä¸»è¦è·¯ç”±
  static const String initialRoute = '/';
  static const String login = '/login';
  static const String registration = '/registration';
  static const String home = '/home';
  static const String indexPage = '/index';
  static const String mainPage = '/main';

  // åŠŸèƒ½è·¯ç”±
  static const String cameraPage = '/camera';
  static const String aiChatPage = '/ai_chat';
  static const String reportPage = '/report';
  static const String profilePage = '/profile';
  static const String reportDetail = '/report_detail';
  static const String mealAnalysisReport = '/meal_analysis_report';

  // å¸¦å‚æ•°è·¯ç”±
  static const String menuPage = '/menu';
  static const String dishDetail = '/dish_detail';
  static const String recipeList = '/recipe_list';
}
```

### å¯¼èˆªè¾…åŠ©æ–¹æ³•

```dart
// å¯¼èˆªåˆ°ç›¸æœºé¡µ
static Future navigateToCameraPage(BuildContext context)

// å¯¼èˆªåˆ° AI èŠå¤©é¡µ
static Future navigateToAiChat(BuildContext context)

// å¯¼èˆªåˆ°èœå•é¡µï¼ˆå¸¦å‚æ•°ï¼‰
static Future navigateToMenuPage(
  BuildContext context, {
  required String category,
  required int recipeFoodId,
  required List<dynamic> recipeFoods,
})

// å¯¼èˆªåˆ°èœå“è¯¦æƒ…é¡µ
static void navigateToDishDetail(
  BuildContext context, {
  required dynamic dish,
})

// å¯¼èˆªåˆ°é£Ÿè°±åˆ—è¡¨é¡µ
static Future navigateToRecipeList(
  BuildContext context, {
  required dynamic initialRecipe,
  required Function(dynamic) onRecipeSelected,
})

// å¯¼èˆªåˆ°ç™»å½•é¡µï¼ˆæ›¿æ¢å½“å‰è·¯ç”±ï¼‰
static void navigateToLoginAndReplace(BuildContext context)

// å¯¼èˆªåˆ°ä¸»é¡µï¼ˆæ›¿æ¢å½“å‰è·¯ç”±ï¼‰
static void navigateToMainPageAndReplace(BuildContext context)

// å¯¼èˆªåˆ°æŠ¥å‘Šé¡µ
static void navigateToReportPage(BuildContext context, {dynamic mealRecordId})

// å¯¼èˆªåˆ°é¤é£Ÿåˆ†ææŠ¥å‘Š
static void navigateToMealAnalysisReport(
  BuildContext context, {
  required String image,
  required String title,
  required String tag,
  required List<dynamic> foods,
})

// å¯¼èˆªåˆ°æ³¨å†Œæµç¨‹
static void navigateToRegistration(BuildContext context)
```

---

## çŠ¶æ€ç®¡ç†

### Provider çŠ¶æ€ç®¡ç†

ä½¿ç”¨ `Provider` åŒ…è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œä¸»è¦çŠ¶æ€ç®¡ç†å™¨ï¼š

#### RegistrationProvider

**èŒè´£ï¼š** ç®¡ç†ç”¨æˆ·æ³¨å†Œæµç¨‹çš„ 4 æ­¥çŠ¶æ€

**æ ¸å¿ƒå­—æ®µï¼š**
```dart
int currentStep = 1;              // å½“å‰æ­¥éª¤ (1-4)
UserRegistrationData data;        // ç”¨æˆ·æ•°æ®
```

**æ ¸å¿ƒæ–¹æ³•ï¼š**
```dart
// æ­¥éª¤å¯¼èˆª
void nextStep()
void previousStep()
void reset()

// æ•°æ®æ›´æ–°
void updateName(String name)
void updateGender(String gender)
void updateBirthDate(DateTime birthDate)
void updateQuestionnaireData(Map<String, dynamic> data)
void updateSelectedGoals(List<String> goals)
void updateAdvancedInfo(AdvancedHealthInfo? info)
void updateEmail(String email)
void updatePassword(String password)

// å®Œæˆæ³¨å†Œ
Future<void> completeRegistration()
```

**ä½¿ç”¨æ–¹æ³•ï¼š**
```dart
// è¯»å–çŠ¶æ€
final provider = Provider.of<RegistrationProvider>(context);

// æ›´æ–°çŠ¶æ€
provider.updateName('å¼ ä¸‰');

// å¯¼èˆª
provider.nextStep();
```

---

## å®æ—¶é€šä¿¡

### MQTT å®æ—¶æ¨é€

#### è¿æ¥é…ç½®

```dart
Broker: 118.195.149.172
Port: 1883
Client ID: zenify_app_{timestamp}
Protocol: MQTT 3.1.1
Keep Alive: 30 seconds
QoS: AtLeastOnce (1)
Clean Session: true
```

#### ä¸»é¢˜è®¢é˜…

**è¯†åˆ«çŠ¶æ€ä¸»é¢˜ï¼š**
```
user/{userId}/recognition_started    // è¯†åˆ«å¼€å§‹
user/{userId}/recognition_completed   // è¯†åˆ«å®Œæˆ
```

#### ä½¿ç”¨ç¤ºä¾‹

```dart
class _MyWidgetState extends State<MyWidget> {
  StreamSubscription<RecognitionStatus>? _mqttSubscription;

  @override
  void initState() {
    super.initState();
    _listenToMQTT();
  }

  void _listenToMQTT() {
    _mqttSubscription = MQTTService().statusStream.listen((status) {
      switch (status.status) {
        case RecognitionStatusType.analyzing:
          // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
          break;
        case RecognitionStatusType.completed:
          // è·³è½¬åˆ°ç»“æœé¡µ
          break;
      }
    });
  }

  @override
  void dispose() {
    _mqttSubscription?.cancel();
    super.dispose();
  }
}
```

#### çŠ¶æ€æ¨¡å‹

```dart
class RecognitionStatus {
  final RecognitionStatusType status;
  final String? message;
  final DateTime? timestamp;

  RecognitionStatus({
    required this.status,
    this.message,
    this.timestamp,
  });
}
```

---

## å®‰å…¨ä¸è®¤è¯

### è®¤è¯æœºåˆ¶

#### Token ç®¡ç†

- ä½¿ç”¨ Bearer Token è®¤è¯
- Token å­˜å‚¨åœ¨ SharedPreferences
- æ¯æ¬¡è¯·æ±‚è‡ªåŠ¨æ·»åŠ  Authorization å¤´

#### è®¤è¯æµç¨‹

```
1. ç”¨æˆ·ç™»å½•/æ³¨å†Œ
   â†“
2. æœåŠ¡å™¨è¿”å› access_token
   â†“
3. å®¢æˆ·ç«¯å­˜å‚¨ token
   â†“
4. æ¯æ¬¡è¯·æ±‚æºå¸¦ token
   â†“
5. Token è¿‡æœŸæ—¶é‡æ–°ç™»å½•
```

#### è‡ªåŠ¨è®¤è¯

```dart
// ApiService è‡ªåŠ¨æ·»åŠ è®¤è¯å¤´
static Map<String, String> _getHeaders() async {
  final token = await UserSession.token;
  return {
    'Content-Type': 'application/json',
    if (token != null) 'Authorization': 'Bearer $token',
  };
}
```

### æƒé™ç®¡ç†

#### ç›¸æœºæƒé™

```dart
// è¯·æ±‚ç›¸æœºæƒé™
final status = await Permission.camera.request();
if (status.isGranted) {
  // å·²æˆæƒ
}
```

#### éº¦å…‹é£æƒé™

```dart
// è¯­éŸ³è¯†åˆ«è‡ªåŠ¨è¯·æ±‚æƒé™
final speechService = SpeechToTextService();
await speechService.initialize();
```

#### å­˜å‚¨æƒé™

```dart
// è¯»å†™æ–‡ä»¶æƒé™
final status = await Permission.storage.request();
if (status.isGranted) {
  // å·²æˆæƒ
}
```

---

## å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- Flutter SDK >=3.3.0
- Dart SDK >=3.3.0
- Android Studio / Xcode / VS Code
- Node.js (å¯é€‰ï¼Œç”¨äºæŸäº›å·¥å…·)

### å®‰è£…ä¾èµ–

```bash
flutter pub get
```

### è¿è¡Œåº”ç”¨

```bash
# Android
flutter run

# iOS
flutter run -d ios

# Web
flutter run -d chrome

# Windows
flutter run -d windows

# macOS
flutter run -d macos

# Linux
flutter run -d linux
```

### å¼ºåˆ¶æ³¨å†Œæ¨¡å¼

```bash
flutter run --dart-define=FORCE_REGISTRATION=true
```

### æ„å»ºå‘å¸ƒç‰ˆæœ¬

```bash
# Android APK
flutter build apk --release

# Android App Bundle
flutter build appbundle --release

# iOS
flutter build ios --release

# Web
flutter build web --release
```

### ä»£ç è§„èŒƒ

#### å‘½åè§„èŒƒ

- **ç±»å**: å¤§é©¼å³°å‘½åæ³• (PascalCase)
  ```dart
  class UserProfilePage {}
  ```

- **å˜é‡å**: å°é©¼å³°å‘½åæ³• (camelCase)
  ```dart
  String userName;
  int userId;
  ```

- **å¸¸é‡å**: ä¸‹åˆ’çº¿å‘½åæ³• (snake_case)
  ```dart
  const String api_base_url = 'https://api.example.com';
  ```

- **ç§æœ‰æˆå‘˜**: ä»¥ä¸‹åˆ’çº¿å¼€å¤´
  ```dart
  String _privateVariable;
  void _privateMethod() {}
  ```

#### æ–‡ä»¶å‘½å

- **Dart æ–‡ä»¶**: ä¸‹åˆ’çº¿å‘½åæ³•
  ```
  user_profile_page.dart
  registration_provider.dart
  ```

#### å¯¼å…¥é¡ºåº

```dart
// 1. Dart æ ¸å¿ƒåº“
import 'dart:async';

// 2. Flutter åŒ…
import 'package:flutter/material.dart';

// 3. ç¬¬ä¸‰æ–¹åŒ…
import 'package:provider/provider.dart';

// 4. é¡¹ç›®å†…éƒ¨
import '../services/api.dart';
import '../models/user.dart';
```

### è°ƒè¯•æŠ€å·§

#### æ‰“å°æ—¥å¿—

```dart
print('Debug message: $variable');
debugPrint('Debug message: $variable');
```

#### å¼€å‘è€…å·¥å…·

```bash
# æ£€æŸ¥ Flutter ç¯å¢ƒ
flutter doctor

# åˆ†æä»£ç 
flutter analyze

# æ ¼å¼åŒ–ä»£ç 
flutter format .

# è¿è¡Œæµ‹è¯•
flutter test
```

#### çƒ­é‡è½½

- **çƒ­é‡è½½**: `r` - ä¿ç•™åº”ç”¨çŠ¶æ€é‡æ–°åŠ è½½
- **çƒ­é‡å¯**: `R` - å®Œå…¨é‡å¯åº”ç”¨
- **é€€å‡º**: `q`

### å¸¸è§é—®é¢˜

#### 1. ç½‘ç»œè¯·æ±‚å¤±è´¥

**é—®é¢˜**: API è¯·æ±‚è¶…æ—¶æˆ–å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```dart
try {
  final response = await Api.getUserInfo();
} catch (e) {
  print('Error: $e');
  // æ£€æŸ¥ç½‘ç»œè¿æ¥
  // æ£€æŸ¥ API åœ°å€
  // æ£€æŸ¥ token æ˜¯å¦è¿‡æœŸ
}
```

#### 2. MQTT è¿æ¥å¤±è´¥

**é—®é¢˜**: æ— æ³•è¿æ¥åˆ° MQTT æœåŠ¡å™¨

**è§£å†³æ–¹æ¡ˆ**:
```dart
// æ£€æŸ¥ broker åœ°å€å’Œç«¯å£
// æ£€æŸ¥ç½‘ç»œè¿æ¥
// æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
```

#### 3. ç›¸æœºåˆå§‹åŒ–å¤±è´¥

**é—®é¢˜**: ç›¸æœºæ— æ³•å¯åŠ¨

**è§£å†³æ–¹æ¡ˆ**:
```dart
// æ£€æŸ¥ç›¸æœºæƒé™
// æ£€æŸ¥è®¾å¤‡æ˜¯å¦æœ‰ç›¸æœº
// æ£€æŸ¥ Flutter ç‰ˆæœ¬å…¼å®¹æ€§
```

#### 4. è¯­éŸ³è¯†åˆ«å¤±è´¥

**é—®é¢˜**: è¯­éŸ³è¯†åˆ«ä¸å·¥ä½œ

**è§£å†³æ–¹æ¡ˆ**:
```dart
// æ£€æŸ¥éº¦å…‹é£æƒé™
// æ£€æŸ¥è®¾å¤‡æ˜¯å¦æ”¯æŒè¯­éŸ³è¯†åˆ«
// æ£€æŸ¥è¯­è¨€è®¾ç½®
```

---

## éƒ¨ç½²è¯´æ˜

### Android éƒ¨ç½²

#### 1. é…ç½®ç­¾å

ç¼–è¾‘ `android/key.properties`:
```properties
storePassword=your_store_password
keyPassword=your_key_password
keyAlias=your_key_alias
storeFile=path/to/keystore.jks
```

#### 2. æ„å»ºå‘å¸ƒåŒ…

```bash
# APK
flutter build apk --release

# App Bundle (æ¨è)
flutter build appbundle --release
```

#### 3. ä¸Šä¼ åˆ° Google Play

- ä½¿ç”¨ Google Play Console ä¸Šä¼  AAB æ–‡ä»¶
- å¡«å†™åº”ç”¨ä¿¡æ¯
- æäº¤å®¡æ ¸

### iOS éƒ¨ç½²

#### 1. é…ç½®ç­¾å

- åœ¨ Xcode ä¸­é…ç½®ç­¾åè¯ä¹¦
- é€‰æ‹© Team
- é…ç½® Bundle Identifier

#### 2. æ„å»ºå‘å¸ƒåŒ…

```bash
flutter build ios --release
```

#### 3. ä¸Šä¼ åˆ° App Store

- ä½¿ç”¨ Xcode æˆ– Application Loader ä¸Šä¼ 
- åœ¨ App Store Connect é…ç½®åº”ç”¨ä¿¡æ¯
- æäº¤å®¡æ ¸

### Web éƒ¨ç½²

#### 1. æ„å»ºå‘å¸ƒç‰ˆæœ¬

```bash
flutter build web --release
```

#### 2. éƒ¨ç½²åˆ°æœåŠ¡å™¨

å°† `build/web` ç›®å½•å†…å®¹éƒ¨ç½²åˆ° Web æœåŠ¡å™¨ï¼ˆå¦‚ Nginxã€Apacheã€Firebase Hostingï¼‰

### Windows éƒ¨ç½²

#### 1. é…ç½®ç­¾å

ä½¿ç”¨ä»£ç ç­¾åè¯ä¹¦å¯¹åº”ç”¨è¿›è¡Œç­¾å

#### 2. æ„å»ºå‘å¸ƒåŒ…

```bash
flutter build windows --release
```

#### 3. åˆ†å‘

å°† `build/windows/x64/runner/Release` ç›®å½•æ‰“åŒ…åˆ†å‘

### ç¯å¢ƒé…ç½®

#### å¼€å‘ç¯å¢ƒ

```dart
// lib/services/service_config.dart
class ApiConfig {
  static const String baseUrl = "http://127.0.0.1:8000";
  static const String mqttBrokerAddress = "127.0.0.1";
  static const int mqttPort = 1883;
}
```

#### æµ‹è¯•ç¯å¢ƒ

```dart
class ApiConfig {
  static const String baseUrl = "http://test-api.example.com:8000";
  static const String mqttBrokerAddress = "test-mqtt.example.com";
  static const int mqttPort = 1883;
}
```

#### ç”Ÿäº§ç¯å¢ƒ

```dart
class ApiConfig {
  static const String baseUrl = "http://118.195.149.172:8000";
  static const String mqttBrokerAddress = "118.195.149.172";
  static const int mqttPort = 1883;
}
```

---

## é™„å½•

### é¡¹ç›®èµ„æº

- **Flutter å®˜æ–¹æ–‡æ¡£**: https://docs.flutter.dev/
- **Provider æ–‡æ¡£**: https://pub.dev/packages/provider
- **MQTT Client æ–‡æ¡£**: https://pub.dev/packages/mqtt_client
- **FL Chart æ–‡æ¡£**: https://pub.dev/packages/fl_chart

### è”ç³»æ–¹å¼

- **é¡¹ç›®ä»“åº“**: [GitHub Repository]
- **é—®é¢˜åé¦ˆ**: [Issue Tracker]
- **æŠ€æœ¯æ”¯æŒ**: [Email]

### ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | è¯´æ˜ |
|-----|------|------|
| 1.0.0 | 2025-01-15 | åˆå§‹ç‰ˆæœ¬ |

### è®¸å¯è¯

[è®¸å¯è¯ä¿¡æ¯]

---

**æ–‡æ¡£ç»“æŸ**
